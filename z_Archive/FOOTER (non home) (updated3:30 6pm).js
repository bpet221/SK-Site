<!-- Navigation Sections -->
<div id="section-4hcS9sD17J"></div>
<div id="section-gs7_Vr7US1" style="display:none;"></div>
<div id="section-p-41UvcD17" style="display:none;"></div>

<!-- Second Background Element -->
<div id="second-bg"></div>

<!-- Scroll Up Arrow Element -->
<img class="scroll-up-arrow" src="https://storage.googleapis.com/msgsndr/FahnfAK4Y2D0yi846rOF/media/67bcccc4c3edf624fc05abe5.png" alt="Scroll Up Arrow" />

<script>
document.addEventListener("DOMContentLoaded", function () {
    if (document.querySelector("iframe[name='funnel-builder']")) {
        document.body.classList.add("has-funnel-builder");
    }

    var scrollUpButton = document.querySelector('.scroll-up-arrow');
    if (scrollUpButton) {
        scrollUpButton.addEventListener("click", function () {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }

    function toggleNav() {
        var width = window.innerWidth;
        var navIds = ["section-4hcS9sD17J", "section-gs7_Vr7US1", "section-p-41UvcD17"];
        
        navIds.forEach(function (id) {
            var el = document.getElementById(id);
            if (el) {
                el.classList.remove("show");
                el.style.display = "none"; // Hide all initially
                el.style.transform = "translateY(-100%)"; // Reset position
            }
        });

        var nav = null;
        if (width > 1250) {
            nav = document.getElementById("section-4hcS9sD17J");
        } else if (width >= 481 && width <= 1250) {
            nav = document.getElementById("section-gs7_Vr7US1");
        } else {
            nav = document.getElementById("section-p-41UvcD17");
        }

        if (nav) {
            nav.style.display = "block";
            setTimeout(() => {
                nav.classList.add("show"); // Trigger roll-down
            }, 500); // 0.5s delay
        }
    }

    function runLoaderSequence() {
        toggleNav(); // Use same logic as resize
        var secondBg = document.getElementById("second-bg");
        if (secondBg) {
            setTimeout(() => secondBg.classList.add("fade"), 2150); // 0.75s longer delay
        }
    }

    // Run immediately
    runLoaderSequence();

    // Prevent re-hiding on visibility change or other events
    document.addEventListener("visibilitychange", function () {
        if (!document.hidden) {
            toggleNav(); // Re-apply correct nav
        }
    });

    window.addEventListener('resize', toggleNav);
    window.addEventListener("scroll", function () {
        var scrollUpArrow = document.querySelector(".scroll-up-arrow");
        if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
            scrollUpArrow.classList.add("visible");
        } else {
            scrollUpArrow.classList.remove("visible");
        }
    });

    // Check continuously to prevent roll-up
    setInterval(() => {
        var width = window.innerWidth;
        var activeNav = width > 1250 ? document.getElementById("section-4hcS9sD17J") : 
                       (width >= 481 && width <= 1250 ? document.getElementById("section-gs7_Vr7US1") : 
                       document.getElementById("section-p-41UvcD17"));
        if (activeNav && !activeNav.classList.contains("show")) {
            activeNav.style.display = "block";
            activeNav.classList.add("show"); // Force show immediately
        }
    }, 50); // Check every 0.05s
});
</script>